<html>
<head>
    <title>DunMap Dungeon Map Stocker</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" />
    <link href="vis/vis.css" rel="stylesheet" type="text/css" />
    <link href="css/dungen.css" rel="stylesheet" type="text/css" />
</head>
<body>

<h3 style="padding-left: 50px">  <b>DunMap</b><small> Dungeon Map Stocker v 0.4, Bride of <a href="dungen.html">DunGen</a> by Ed Allen: <a href = "https://sites.google.com/site/hobbyhovel">Ed's Hobby Hovel</a> & <a href="http://geekruminations.blogspot.com">Ruminations of a Geek</a></small></h3>
<p>Choose the Level. Enter your map's URL and click Load Map or pick one from the menu. When you see the map, click in rooms to place room numbers and drag to reposition.  Contents for rooms will randomly generate as you place them. The node editor will let you edit or reroll contents. </p>
<button id="scroll-to-key" class="fixed-nav">Key</button>
<button id= "scroll-to-top" class="fixed-nav" style="display: none">Top</button>
<div class="container-fluid">
    <select id="level">
        <option value = "0">Level 1</option>
        <option value = "1">Level 2</option>
        <option value = "2">Level 3</option>
        <option value = "3">Level 4</option>
        <option value = "4">Level 5</option>
        <option value = "5">Level 6</option>
        <option value = "wilds">Wilds</option>
    </select>

    <button class= "btn-small" id="theme">Theme</button>
    <button class= "btn-small" id="style">Style</button>
    <label for="treasureMultiplier" style="padding-right: 5px">Treasure X </label><input id="treasureMultiplier" value='1.0' size='3' />
    <label for="map_url" style="padding-right: 5px">Image URL</label>
    <select id="map_url_select">

    </select>
    <input id="map_url" size="30" placeholder="URL of source map" value="http://2.bp.blogspot.com/-JpzHDN3kKF0/VA5sgJIqJnI/AAAAAAAABnY/U-Xx1BtK35A/s1600/stone_walls_curve.png" />
    <button class= "btn-small" id="load_stock">Load Map</button>

    <label for="dungeon_name">Name for save </label><input id="dungeon_name" placeholder="Name the dungeon"/>
    <button class= "btn-small" id="save" >Save</button>
    <select id="saved">
        <option>Saved Dungeons</option>
    </select>
    <button id="load">Load</button>
    <button id="delete">Delete from storage</button>
    <button id="lock" data-status="unlocked">Clicks add</button>
    <!-- <button id= "chrome-dl" type="button" onclick="DG.chromeSaveImage()" style="display:none" >Download Image</button>
    <button class= "btn-small" id="toggle_place_move">Place Nodes</button> -->
    <div id="positioner"  style="position: relative;">
        <canvas id="dungeon_map" >canvas test</canvas>
        <div id="dungeon" class="map_nodes"></div>
    </div>
    <span class="clear-both"></span>

      <div id="table-holder">
        <table class = "dungen table table-bordered" id="dungeon_key"></table>
      </div>

    <div id="footer_notes" style="clear: both"><label for="notes">Notes</label><br>
        <textarea id="notes" cols='120' rows='10' ></textarea>
    </div>
    <br>
    <div id="reskin_div">
        <h4>Re-skin creatures and treasures</h4>
      <p id="reskin" >Re-skin creatures or replace other repeating text in room descriptions and notes - there is no Undo so be careful.</p>
      Replace <input id="text_from"/> with <input id="text_to"/> in Notes and all Location Descriptions. <button id="replace">Make the change</button>
    </div>
    <br>

    <button id="toggle_import_export">Import and Export</button>
    <div id="import_export" style='display: none'>

    <button id="export" style="margin-right: 20px">Export</button>
    <button id="import">Import</button>
    <p> Export dumps the data for the current dungeon into the field below. Copy and paste into an email or a file to move to another computer.
        Paste into the field there and click Import to load it. Careful editing in this field is possible. Save with a name on the destination computer.</p>
    <textarea id="export-import" cols='120' rows='10' ></textarea>
        <p>To manually save and use the dungeon outside this page, copy the text of the room contents table and notes field and paste into another file,
            and use the Download Image button on Chrome or the right click menu to save the image as a PNG.
            If you need to clear all cached data in your browser for some reason, please export if you'll want to use a dungeon in DunGen again or manually save of any dungeons you care about first.
            DunGen saves to your browser's "LocalStorage" not to a server. <b>Clearing all LocalStorage will wipe out any saved and edited dungeons.</b></p>
    </div>
</div>
<br>

<h3>New features and plans</h3>
<p> First cut at dungeon name generation in place, using new template system.</p>
<p>The (Clicks add/Clicks locked) button toggles whether clicks on the map add markers. So far, I can't lock the dragging of markers, still investigating.</p>
<p>The Style dialog now includes font size and color for room numbers!</p>
<p>Notes field: Wandering Monsters and Relationship addition with nodes fixed to a first approximation.</p>
<p>Map Artists: If you have posted maps online that you would like included in the convenience dropdown menu, let me know on G+ or a comment on my <a href="http://geekruminations.blogspot.com/2015/11/add-your-maps-to-dunmap.html" target="_blank">Ruminations of a Geek</a> blog post about this, either specific map names and image URLs or point me to a collection page and I'll find the URLs there. You can also reshare a G+ post with a map you want included to me. I figure on including artists' names or initials before the map titles, and then
going hierarchical by the artist's name as the first level once the list gets long enough to be awkward as a single list, with the credits section below linking back to your pages.</p>
<p>
This version reworks the canvases to keep reloaded room numbers in place. Anything you saved before this release will need dragging into place once, sorry for the alpha pain there.
</p>
<p>I will be rescanning some of the maps I linked in the menu to make them a better fit here.</p>
<h3>Image Link Credits</h3>
<p>
    EA: <a href="http://geekruminations.blogspot.com"  target="_blank">Ed Allen</a><br>
    BL: <a href="https://www.flickr.com/photos/britishlibrary/"  target="_blank">British Library Flickr</a> of free images from old books
</p>

<p>
    Comments welcome at the Ruminations blog linked above or on G+. If you like hacking, take a look at the dungen_stock.js file first.
    It's pretty easy to customize content there. DunGen is now up on <a href ='https://github.com/edallen/dungen'>Github</a>.
</p>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!--<script  src="vendor/lodash.js"</script> -->
<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="bootstrap/js/bootbox.min.js"></script>
<script type="text/javascript" src="vis/vis.js"></script>
<script type="text/javascript" src="js/dungen.js"></script>
<script type="text/javascript" src="js/dungen_view.js"></script>
<script type="text/javascript" src="js/dungen_map.js"></script>
<script type="text/javascript" src="js/dungen_stock.js"></script>
<script type="text/javascript" src="js/dungen_run.js"></script>
<script type="text/javascript" src="js/dungen_map_ui.js"></script>
<script type="text/javascript" src="js/dungen_names.js"></script>
</body>


</html>